<!DOCTYPE html>
<html lang="en">
 
 <!--created: 150620 00:00 AM GMT
     updated: 170622 12:26 PM GMT-->

 <!--
   This program still needs some improvements...

   - The search is far too precise/and, needs to find a 'whole' match in order to work.../it should allow for 'partial' matches, as well
     There is a Javascript function which does partial matching...I forgot which...? In fact, there is more than one of these, actually:
     substr()/or, indexOf()/-etc.

   - The output could be improved...; maybe, include a table with a few headings: mainCategory, subCategory, name, number/
     also, throw some colours in there, as well.
 -->

 <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Javascript phonebook app</title>
 </head>
 
 <body>
  <h1>Javascript Phonebook App</h1>
  <form>
   <input type="text" id="search" name="search">
   <input type="button" value="Search" onClick="javascript:doSearch();">
   <input type="button" value="Show ALL" onClick="javascript:showAllData();">   
  </form> 
  <hr />
  <div id="divOutput"></div>
  
  <script>

   //*** Variable declarations...

   var output=document.getElementById("divOutput");

   //*** Initialise database with values.../an array of objects...
   var phoneObj = [
                   {mainCategory: "Business",  subCategory: "Finance",  name: "Nat West",                   number:"0800 200 400"},
                   {mainCategory: "Business",  subCategory: "Finance",  name: "Cashplus",                   number:"0330 024 0924"},
                   {mainCategory: "Friend",    subCategory: "Art",      name: "Lil",                        number:"222 2222 2222"},
                   {mainCategory: "Family",    subCategory: "Sport",    name: "Carol",                      number:"333 3333 3333"},
                   {mainCategory: "Emergency", subCategory: "General",  name: "Ambulance, Fire, Police",    number:"999"},
                   {mainCategory: "Emergency", subCategory: "General",  name: "Doctor",                     number:"111"}
                  ];

   //*** Search objects database...
   function doSearch(){
    var searchText=document.getElementById("search").value;
    var outString="";
    for (var x=0;x<phoneObj.length;x++){
     //*** Make the comparison all lower case...; so, that the search is case insensitive...

     if ((searchText.toLowerCase() == phoneObj[x].mainCategory.toLowerCase()) ||
         (searchText.toLowerCase() == phoneObj[x].subCategory.toLowerCase()) || 
         (searchText.toLowerCase() == phoneObj[x].name.toLowerCase())) 
     {
          outString += phoneObj[x].mainCategory + ", " + phoneObj[x].subCategory + ", " + phoneObj[x].name + ", " + phoneObj[x].number + "<br>";
     } 
    }
    output.innerHTML = outString;
   }

   //*** print ALL database values into the web page 'output' section...
   function showAllData(){
    clearOutputDisplay();
    for (var i=0; i<phoneObj.length; i++){
     output.innerHTML += phoneObj[i].mainCategory + ", " + phoneObj[i].subCategory + ", " + phoneObj[i].name + ", " + phoneObj[i].number + "<br>";
    }
   }

   function clearOutputDisplay(){
    output.innerHTML = "";
   }

  </script>

 </body>
</html>
